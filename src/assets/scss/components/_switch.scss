
@use "sass:map";
@use "./utils/all" as utils;
@use "./utils/variables" as vars;

/* @docs */
$switch-border-color: rgb(227, 227, 227) !default;
$switch-border-size: 2px !default;
$switch-font-size: 15px !default;
$switch-border-radius: .500rem !default;
$switch-padding: .5em .75em !default;
$switch-width: 2.75rem !default;
$switch-control-label-padding-left: 11px !default;
$switch-active-background-color: utils.variant-varname(map.get(vars.$theme-colors, "primary"),vars.$variant-degree) !default;
/* @docs */

@mixin switch-size ($control,$check){
    .control-label {
        font-size: $control;
    }
    .check { 
        width: $check
    }
    .check::before {
        content: "";
        width: calc(($check - .2rem * 2) / 2);
        height: calc(($check - .2rem * 2) * .5);
    }
    .check:checked::before {
        content: '';
        transform: translateX(calc(($check - .2rem * 2) / 2));
    }
}

.switch {
    padding: $switch-padding;
    //
    vertical-align:top;
    //
    display: flex;
    align-items: center;

    .control-label {
        padding-left: $switch-control-label-padding-left;
        font-size: $switch-font-size;
    }

    // input {
    //     -webkit-appearance: none;
    //     -moz-appearance: none;
    //     appearance: none;
    // }

    .check {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        flex-shrink: 0;
        font-size: inherit;
        width: $switch-width;
        height: auto;
        padding: .2rem;
        background: gray;
        border-radius: $switch-border-radius;
        transition: all vars.$speed-slow var(--ease-in); 
    }
    .check::before {
        content: "";
        display: block;
        font-size: inherit;
        border-radius: $switch-border-radius;
        width: calc(($switch-width - .2rem * 2) / 2);
        height: calc(($switch-width - .2rem * 2) * .5);
        background: white;
        box-shadow: 0 3px 1px #0000000d, 0 2px 2px #0000001a, 0 3px 3px #0000000d;
        transition: all vars.$speed-slow var(--ease-in); 
        will-change: transform;
        transform-origin: left;
    }
    .check:checked::before {
        content: '';
        transform: translateX(calc(($switch-width - .2rem * 2) / 2));
    }

    // Variants
    @each $name, $variant in vars.$theme-colors {
        &.is-#{$name} {
           .check {
            background-color: utils.variant-varname($variant,vars.$variant-degree);
           }
        }
    }

    // Size
    &.is-small {
        @include switch-size(8px, 1rem);
    }
    &.is-medium {
        @include switch-size(12px, 1.50rem);
    }
    &.is-large {
        @include switch-size(20px, 2rem);
    }

    &.is-disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }
}